package com.star.sud;
import java.net.Socket;
import java.util.Properties;    
import javax.mail.*;    
import javax.mail.internet.*;  
import com.sun.mail.smtp.SMTPTransport;

class JavaMailTest{  
    public static void send(String from,String password,String to,String sub,String msg){  
    	Properties props = new Properties(); 
    	props.put("mail.smtp.port", "587");  
    	props.put("mail.smtp.host", "smtp.gmail.com"); 
        props.put("mail.debug", "true");  
        props.put("mail.smtp.socketFactory.port", "587");  
        props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");  
        props.put("mail.smtp.socketFactory.fallback", "false"); 
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.ssl.protocols", "TLSv1.2");
        Session session = Session.getInstance(props,  
        new javax.mail.Authenticator() {
           protected PasswordAuthentication getPasswordAuthentication() {  
           return new PasswordAuthentication(from,password);  
       }  
       });  
        SMTPTransport transport;
		
        try {    
       //session.setDebug(true);  
        	
        	transport = (SMTPTransport)session.getTransport("smtp");
       //Transport transport = session.getTransport("smtp");  
       InternetAddress addressFrom = new InternetAddress(from);  
       MimeMessage message = new MimeMessage(session);  
      // message.setSender();  
       message.setFrom(addressFrom);
       message.setSubject("Result");  
       message.setContent(msg, "text/plain");  
       message.addRecipient(Message.RecipientType.TO, new InternetAddress(to));  
       //transport.connect();
       //transport.send(message);
      Socket socket = new Socket("smtp.gmail.com",587);
      transport.connect(socket);
       transport.sendMessage(message, message.getAllRecipients());
       System.out.println("message sent successfully");    
    }  
       
    catch (Exception e) {throw new RuntimeException(e);
    }  
    }
        public static void main(String args[]) {
        JavaMailTest.send("umesh.pandey87@gmail.com","letn uyyl pztt temr","umesh_pandey87@yahoo.co.in",
          		 "Result","Shalom");  
        }
   
    }  


